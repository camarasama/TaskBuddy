# TaskBuddy Backend Environment Variables
# Copy this file to .env and fill in your values

# ─── Database ────────────────────────────────────────────────────────────────
DATABASE_URL="postgresql://taskbuddy_admin:yourpassword@localhost:5432/taskbuddy"

# ─── JWT Secrets ─────────────────────────────────────────────────────────────
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=replace-with-secure-random-string
JWT_REFRESH_SECRET=replace-with-another-secure-random-string

# JWT Expiration
JWT_EXPIRES_IN="1h"
JWT_REFRESH_EXPIRES_IN="7d"

# Child-specific JWT (Phase 0 / CR-04 - persistent child sessions)
JWT_CHILD_ACCESS_EXPIRES_IN="24h"
JWT_CHILD_REFRESH_EXPIRES_IN="90d"

# ─── Server ───────────────────────────────────────────────────────────────────
PORT=3001
NODE_ENV=development

# ─── CORS ────────────────────────────────────────────────────────────────────
# Comma-separated list of allowed origins
CLIENT_URL="http://localhost:3000"

# Set to true when sharing via ngrok or any cross-origin tunnel
CROSS_ORIGIN_COOKIES=false

# ─── File Storage (CR-05) ────────────────────────────────────────────────────
# "local" for development, "r2" for production
STORAGE_PROVIDER="local"

# Root path for local file storage (used when STORAGE_PROVIDER=local)
UPLOADS_BASE_PATH="./uploads"

# ─── Cloudflare R2 (required when STORAGE_PROVIDER=r2) ───────────────────────
# Find these in your Cloudflare dashboard → R2 → Manage R2 API Tokens
R2_ACCOUNT_ID=your-cloudflare-account-id
R2_ACCESS_KEY_ID=your-r2-access-key-id
R2_SECRET_ACCESS_KEY=your-r2-secret-access-key
R2_BUCKET_NAME=taskbuddy-uploads
# Public URL for your R2 bucket (enable public access in Cloudflare dashboard)
R2_PUBLIC_URL=https://pub-xxxxxxxxxxxx.r2.dev

# ─── Redis (optional) ────────────────────────────────────────────────────────
# REDIS_URL="redis://localhost:6379"

# ─── Rate Limiting ───────────────────────────────────────────────────────────
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# ─── Co-Parent Invites (Phase 0 / CR-08) ─────────────────────────────────────
# Hours before an invite link expires (default 168 = 7 days)
INVITE_TOKEN_EXPIRES_HOURS=168